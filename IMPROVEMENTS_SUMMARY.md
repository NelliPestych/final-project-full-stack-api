# üöÄ –ü—ñ–¥—Å—É–º–æ–∫ –ø–æ–∫—Ä–∞—â–µ–Ω—å Foodies API

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### 1. üê≥ Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- **Dockerfile** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è Node.js 18 Alpine
- **docker-compose.yml** - —Ä–æ–∑—Ä–æ–±–∫–∞ –∑ PostgreSQL
- **docker-compose.prod.yml** - –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- **.dockerignore** - –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–±—ñ—Ä–∫–∏
- **npm scripts** - –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è Docker
- **DOCKER_INSTRUCTIONS.md** - –¥–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- üöÄ –ó–∞–ø—É—Å–∫ –∑–∞ 1 –∫–æ–º–∞–Ω–¥—É: `npm run docker:dev`
- üîí –Ü–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- üì¶ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å –¥–ª—è –≤—Å—ñ—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
- üõ†Ô∏è –õ–µ–≥–∫–∏–π onboarding –Ω–æ–≤–∏—Ö —á–ª–µ–Ω—ñ–≤ –∫–æ–º–∞–Ω–¥–∏

### 2. üîó –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **–ü—Ä–∞–≤–∏–ª—å–Ω–µ —Å–ø—ñ–≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ JSON —Ñ–∞–π–ª—ñ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏–∫—ñ–≤** —Ä–µ—Ü–µ–ø—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–≥—É–∫—ñ–≤
- **Fallback –º–µ—Ö–∞–Ω—ñ–∑–º** –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –∑–≤'—è–∑–∫—ñ–≤

**–î–æ:**
```javascript
const ownerId = 1; // Use first user as owner
```

**–ü—ñ—Å–ª—è:**
```javascript
// Find correct owner by matching JSON user with recipe owner
let ownerId = 1;
if (recipe.owner && recipe.owner.$oid) {
  const recipeOwnerOid = recipe.owner.$oid;
  const userFromJson = usersData.find(u => u._id.$oid === recipeOwnerOid);
  if (userFromJson) {
    const dbUserResult = await pool.query('SELECT id FROM users WHERE name = $1', [userFromJson.name]);
    if (dbUserResult.rows.length > 0) {
      ownerId = dbUserResult.rows[0].id;
    }
  }
}
```

### 3. üßπ –û—á–∏—â–µ–Ω–Ω—è –∫–æ–¥—É
- **–í–∏–¥–∞–ª–µ–Ω—ñ AI-–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ**
- **–û—á–∏—â–µ–Ω—ñ –∑–∞–π–≤—ñ console.log**
- **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –∫–æ–¥—É**

### 4. üîß –ü–æ–∫—Ä–∞—â–µ–Ω—ñ REST API –ø—Ä–∏–Ω—Ü–∏–ø–∏

#### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏:
**–î–æ:**
```
POST /api/users/follow/:id
DELETE /api/users/follow/:id
```

**–ü—ñ—Å–ª—è:**
```
POST /api/users/:id/follow
DELETE /api/users/:id/follow
```

#### –î–æ–¥–∞–Ω—ñ –Ω–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏:
- **PATCH /api/users/profile** - —á–∞—Å—Ç–∫–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- **HEAD /api/recipes/:id** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ä–µ—Ü–µ–ø—Ç—É

#### –ü–æ–∫—Ä–∞—â–µ–Ω—ñ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∏:
- **200** - —É—Å–ø—ñ—à–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è
- **404** - —Ä–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π
- **400** - –ø–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### 5. üì¶ –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ ES Modules

#### –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- **package.json** - –¥–æ–¥–∞–Ω–æ `"type": "module"`
- **–í—Å—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏** - `require` ‚Üí `import`
- **–í—Å—ñ routes** - `require` ‚Üí `import`
- **–í—Å—ñ middleware** - `require` ‚Üí `import`
- **–í—Å—ñ config —Ñ–∞–π–ª–∏** - `require` ‚Üí `import`
- **–í—Å—ñ scripts** - `require` ‚Üí `import`

#### –ü–µ—Ä–µ–≤–∞–≥–∏ ES Modules:
- ‚úÖ –°—É—á–∞—Å–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç JavaScript
- ‚úÖ –ö—Ä–∞—â–∏–π tree-shaking
- ‚úÖ –°—Ç–∞—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∫–æ–¥—É
- ‚úÖ –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ —Å—É—á–∞—Å–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ:
- **Health check** - `GET /health` ‚úÖ
- **HEAD –µ–Ω–¥–ø–æ—ñ–Ω—Ç** - `HEAD /api/recipes/:id` ‚úÖ
- **REST –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏** - `POST /api/users/:id/follow` ‚úÖ
- **ES Modules** - —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è ‚úÖ
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö** - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î ‚úÖ

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–º—ñ–Ω:
- **30+ —Ñ–∞–π–ª—ñ–≤** –∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ –Ω–∞ ES Modules
- **5 –Ω–æ–≤–∏—Ö Docker —Ñ–∞–π–ª—ñ–≤** —Å—Ç–≤–æ—Ä–µ–Ω–æ
- **3 –Ω–æ–≤–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏** –¥–æ–¥–∞–Ω–æ
- **2 REST –ø—Ä–∏–Ω—Ü–∏–ø–∏** –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ
- **1 –º—ñ–≥—Ä–∞—Ü—ñ—è** –ø–æ–∫—Ä–∞—â–µ–Ω–æ

## üöÄ –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫—É

### Docker (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):
```bash
npm run docker:dev
```

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
npm install
npm run migrate
npm run seed
npm start
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **README.md** - –æ–Ω–æ–≤–ª–µ–Ω–æ –∑ Docker —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
- **DOCKER_INSTRUCTIONS.md** - –¥–µ—Ç–∞–ª—å–Ω—ñ Docker —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- **IMPROVEMENTS_SUMMARY.md** - —Ü–µ–π —Ñ–∞–π–ª
- **Swagger** - http://localhost:3000/api-docs

## üéâ –í–∏—Å–Ω–æ–≤–æ–∫

–í—Å—ñ 5 –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π —É—Å–ø—ñ—à–Ω–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

1. ‚úÖ **Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** - –ø–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó
2. ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è** - –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –¥–∞–Ω–∏–º–∏
3. ‚úÖ **–û—á–∏—â–µ–Ω–Ω—è –∫–æ–¥—É** - –≤–∏–¥–∞–ª–µ–Ω—ñ AI –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
4. ‚úÖ **REST API –ø—Ä–∏–Ω—Ü–∏–ø–∏** - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ —Ç–∞ –¥–æ–¥–∞–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
5. ‚úÖ **ES Modules** - —Å—É—á–∞—Å–Ω–∏–π JavaScript —Å—Ç–∞–Ω–¥–∞—Ä—Ç

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—É—á–∞—Å–Ω–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ –≥–æ—Ç–æ–≤–∏–π –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–æ—é! üöÄ
