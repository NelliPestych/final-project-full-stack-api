# üê≥ Docker –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è Foodies API

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –∑ Docker

### 1. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone <repository-url>
cd final-project-full-stack-api

# –ó–∞–ø—É—Å–∫ –∑ Docker Compose
npm run docker:dev
```

–¶–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç—å PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Node.js
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3000
- ‚úÖ –ù–∞–ª–∞—à—Ç—É—î –±–∞–∑—É –¥–∞–Ω–∏—Ö

### 2. –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

- **API**: http://localhost:3000
- **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: http://localhost:3000/api-docs
- **PostgreSQL**: localhost:5432
  - –ë–∞–∑–∞: `foodies_db`
  - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: `postgres`
  - –ü–∞—Ä–æ–ª—å: `password`

### 3. –ö–æ–º–∞–Ω–¥–∏ Docker

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run docker:dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º—ñ
npm run docker:prod

# –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
npm run docker:down

# –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è (–≤–∫–ª—é—á–∞—é—á–∏ –¥–∞–Ω—ñ)
npm run docker:clean
```

### 4. –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö

```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it foodies_postgres psql -U postgres -d foodies_db

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker logs foodies_app
docker logs foodies_postgres

# –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
docker exec -it foodies_app npm run migrate
docker exec -it foodies_app npm run seed
```

### 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker

```
‚îú‚îÄ‚îÄ Dockerfile              # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Node.js –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml      # –†–æ–∑—Ä–æ–±–∫–∞
‚îú‚îÄ‚îÄ docker-compose.prod.yml # –ü—Ä–æ–¥–∞–∫—à–Ω
‚îú‚îÄ‚îÄ .dockerignore           # –§–∞–π–ª–∏ –¥–ª—è —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ uploads/                # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
```

### 6. –ü–µ—Ä–µ–≤–∞–≥–∏ Docker –ø—ñ–¥—Ö–æ–¥—É

- üöÄ **–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç**: –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É
- üîí **–Ü–∑–æ–ª—è—Ü—ñ—è**: –û–∫—Ä–µ–º—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
- üì¶ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å**: –û–¥–Ω–∞–∫–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è –≤—Å—ñ—Ö
- üîÑ **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏
- üõ†Ô∏è **–†–æ–∑—Ä–æ–±–∫–∞**: Hot reload –¥–ª—è Node.js

### 7. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â

#### –†–æ–∑—Ä–æ–±–∫–∞ (.env)
```env
NODE_ENV=development
DB_HOST=postgres
DB_PORT=5432
DB_NAME=foodies_db
DB_USER=postgres
DB_PASSWORD=password
JWT_SECRET=your_super_secret_jwt_key_here_change_in_production
```

#### –ü—Ä–æ–¥–∞–∫—à–Ω (.env.prod)
```env
NODE_ENV=production
DB_HOST=postgres
DB_PORT=5432
DB_NAME=foodies_db_prod
DB_USER=postgres
DB_PASSWORD=secure_production_password
JWT_SECRET=very_secure_jwt_secret_for_production
```

### 8. Troubleshooting

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–π–Ω—è—Ç–∏—Ö –ø–æ—Ä—Ç—ñ–≤
lsof -i :3000
lsof -i :5432

# –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
npm run docker:down
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker ps

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ PostgreSQL
docker logs foodies_postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑ –æ—á–∏—â–µ–Ω–Ω—è–º
npm run docker:clean
npm run docker:dev
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ó–º—ñ–Ω–∏ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç—ñ–ª—å–∫–∏ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose restart app

# –ü–æ–≤–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
npm run docker:down
npm run docker:dev
```

### 9. –ü—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–π

```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
docker-compose -f docker-compose.prod.yml up -d

# –ó –ø–µ—Ä–µ–º—ñ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
DB_PASSWORD=secure_password JWT_SECRET=secret docker-compose -f docker-compose.prod.yml up -d
```

### 10. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker ps

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
docker stats

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker-compose logs -f
```

---

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏

- **–ù–æ–≤—ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏**: –ó–∞–ø—É—Å–∫ –∑–∞ 2 —Ö–≤–∏–ª–∏–Ω–∏
- **CI/CD**: –õ–µ–≥–∫–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —Ç–µ—Å—Ç–æ–≤—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
